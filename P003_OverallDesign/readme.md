在上面的几讲中我们大概介绍了 DEX，分析了我们大概要做什么，以及参考了 Uniswap 的合约代码。那这一讲我们开始设计 Wtfswap 的整体功能，我们会参考 Uniswap V3 的功能，但是会尽量精简，以便课程更加简单易懂。

---

我们还是参考 Uniswap V3，看看要保留和删减的功能有哪些。

Wtfswap 保留的功能有：

- 创建一个 ERC20 代币交易对的。
- 往一个 ERC20 代币交易对中添加流动性，固定手续费。
- 整个提取自己注入的流动性。
- 基于一个 ERC20 代币对交易，支持指定输入代币数量或者指定输出代币数量。

Wtfswap 删除的功能有：

- 指定手续费。
- 部分添加和提取流动性。
- 和原生代币交易。
- 跨交易对交易。

Wtf 有异于 Uniswap 的地方：

- 基于合约记录当前创建的交易池，不依赖于服务端。

之所以这样做是为了让课程更关注核心逻辑，当然，基础的功能实现后剩下的逻辑要补充也不复杂，未来或许会在后续的课程继续补充。

另外，我们基于 [Ant Design](https://ant.design/) 和 [Ant Design Web3](https://web3.ant.design/) 设计了一套 UI，我们除了合约开发外也会介绍如何开发前端界面。

基于 Wtfswap 的功能，我们设计了大概如下三个部分的 UI 界面。

Swap 页面，用于交易代币：

![swap](./img/swap.png)

Pool 页面，用于查看当前已经有的交易池：

![pool](./img/pool.png)

Positions 页面，用于查看和和移除流动性：

![pool](./img/positions.png)

Positions 页面创建流动性弹窗，用于创建新的流动性（如果没有对应的交易池，会先创建交易池）：

![add](./img/add.png)

在后面的部分我们将会把课程分开为两个部分，第一个是以 P1 开头的合约部分课程，另外一个是以 P2 开头的前端部分课程。你可以根据自己的需求选择学习。
